---
title: "webhacking.kr 3ë²ˆ ë¬¸ì œ"
date: 2019-10-11
excerpt: "SQL Injection"
categories : "webhacking"
comments: true
header:
    image: /assets/images/webhacking03image.jpg
    teaser: "https://raw.githubusercontent.com/TERADA-DANTE/TERADA-DANTE.github.io/master/_images/teaser/webhacking_teaser.jpg"
toc: true 
toc_label: "ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ..." 
toc_icon: "chess-rook"
toc_sticky: true
---

## ê°œìš”
Webhacking ë¬¸ì œë“¤ ì¤‘ì—ì„œëŠ” ê·¸ ë¬¸ì œì˜ ëª©í‘œê°€ ë¬´ì—‡ì¸ì§€ ëª¨í˜¸í•œ ê²ƒì´ ìˆìŠµë‹ˆë‹¤. **"ë¬¸ì œ ì†ì— ë‹µì´ìˆë‹¤."** ë¼ëŠ” ë§ì²˜ëŸ¼, ë¬¸ì œë¥¼ ì œì‹œí•˜ë©´ í•´ê²°ë°©ë²•ğŸ—ì´ ë³´ì´ê±°ë‚˜ ë¬¸ì œì˜ ì˜ë„ê°€ íŒŒì•…ë  ìš°ë ¤ê°€ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì´ë²ˆ postëŠ” webhacking.kr 3ë²ˆë¬¸ì œì— ê´€í•œ ê²ƒì…ë‹ˆë‹¤. ë‚œì´ë„ëŠ” ê·¸ë ‡ê²Œ ë†’ì§€ ì•Šì§€ë§Œ, ë¬¸ì œì˜ ëª©í‘œê°€ ëšœë ·í•˜ì§€ ì•Šì•„ ì ì‹œ í•´ë©œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°°ì ì€ 350ì ì…ë‹ˆë‹¤.

3ë²ˆ ë¬¸ì œì˜ ì²« í˜ì´ì§€ëŠ” *ë„¤ëª¨ë„¤ëª¨ë¡œì§*ìœ¼ë¡œ ì•Œë ¤ì§„ ì¼ë³¸ì˜ í¼ì¦ê²Œì„ ë…¸ë…¸ê·¸ë¨ì…ë‹ˆë‹¤. 
![3_1](https://i.imgur.com/cwGbRcw.png)

__*Note*__: í¼ì¦ì˜ í•´ë‹µì€ ìƒëµí•©ë‹ˆë‹¤.

í˜ì´ì§€ì˜ ì†ŒìŠ¤ì½”ë“œğŸ“‘ëŠ” ìœ„ í¼ì¦ì„ í‘¸ëŠ” ê²ƒì— ê´€í•œ ê²ƒì´ë¯€ë¡œ ì‹ ì†í•˜ê²Œ í¼ì¦ì„ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

Solved ë²„íŠ¼ì„ í´ë¦­í•˜ë©´(ì˜¬ë°”ë¥´ê²Œ í¼ì¦ì„ í•´ê²°í–ˆë‹¤ë©´) ë‹¤ìŒê³¼ ê°™ì€ í˜ì´ì§€ê°€ ë“±ì¥í•©ë‹ˆë‹¤.
![3_2](https://i.imgur.com/r3u7ieF.png)

ë²Œì¨ Clear!ğŸ’¯ì¸ê°€ìš”? logë¥¼ ì œì¶œí•  ìˆ˜ ìˆëŠ” í¼ì´ìˆìœ¼ë¯€ë¡œ ì‹œí—˜ì‚¼ì•„ **terada**ë¡œ ì…ë ¥ì„ í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

![3_3](https://i.imgur.com/UXFWac6.png)
__*Note*__ : ipëŠ” ì„ì˜ë¡œ ëª¨ìì´í¬ ì²˜ë¦¬ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤.

nameì—ëŠ” ì œê°€ ë„£ì€ `terada`ë¼ëŠ” ê°’ì´, ipì—ëŠ” ì €ì˜ ipì£¼ì†Œê°€ ì¶œë ¥ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ `answer`ëŠ” ì–´ë””ì„œ ì˜¨ê±¸ê¹Œìš”? [í’€ì´](#í’€ì´)ì—ì„œëŠ” ì´ ì ì— ëŒ€í•´ì„œ ê´€ì°°í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ë¶„ì„
ë³¸ ë¬¸ì œì—ì„œëŠ” íŠ¹ë³„í•œ ì§€ì‹ì´ë‚˜ ìŠ¤í‚¬ì„ í•„ìš”ë¡œ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë¶„ì„ì„ ìƒëµí•©ë‹ˆë‹¤.âœ”

## í’€ì´
`answer`ì— ê´€í•œ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•´ ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ ì†ŒìŠ¤ì½”ë“œë¥¼ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
~~~html
...
<form method="post" action="index.php">
    <input type="hidden" 
           name="answer"  
           value="1010100000011100101011111">
           Clear!
           <br>
           enter your name for log : 
    <input type="text" 
           name="id" 
           maxlength="10" 
           size="10">
    <input type="submit" value="submit">
</form>
...
~~~
í˜ì´ì§€ì˜ ì†ŒìŠ¤ì½”ë“œ ì¤‘ì—ì„œ `index.php`ì— ê°’ì„ ì „ì†¡(post)í•˜ëŠ” formì´ ì¡°ê¸ˆ ìˆ˜ìƒí•©ë‹ˆë‹¤. line 9 ~ 13ì€ ìš°ë¦¬ê°€ ì…ë ¥í•œ textë¥¼ `id`ë¡œ ì „ì†¡í•˜ê³ , line 2 ~ 8 ì€ `hidden` typeìœ¼ë¡œ 101010000001110010101111ì´ë€ ê°’ `answer`ë¡œ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ì´ ê°’ì€ 3ë²ˆ ë¬¸ì œ ì²« í˜ì´ì§€ì— ë“±ì¥í•œ ë…¸ë…¸ê·¸ë¨ì˜ ì •ë‹µì…ë‹ˆë‹¤. 

ë§Œì•½ `answer`ì˜ ê°’ì´ ë‹¤ë¥´ë‹¤ë©´ `index.php`ëŠ” ì–´ë–¤ ê²°ê³¼ë¥¼ ì¶œë ¥í• ê¹Œìš”?

![3_4](https://i.imgur.com/sR6eqiK.png)

`answer`ì˜ valueë¥¼ 1ë¡œ ìˆ˜ì •í•˜ê³  formì„ ì œì¶œí•´ë³´ì•˜ìŠµë‹ˆë‹¤.
![3_5](https://i.imgur.com/Bmrg0Yv.png)

`answer`ê°’ì´ ë³€ê²½ë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

ê·¸ë ‡ë‹¤ë©´ ì´ `answer`ì— **ë¹„ì •ìƒì ì¸ ê°’**ì„ ë„£ìœ¼ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ì¦‰ ì´ form ì„ í†µí•´ SQL Injectionì„ ì‹œë„í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ì˜ˆë¥¼ ë“¤ì–´, **Select * from í…Œì´ë¸”ëª…**ì´ë¼ë˜ì§€, **1' or '1'='1** ë“± ë‹¤ì–‘í•œ ì‹œë„ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.[^1]

ê·¸ ê³¼ì •ì—ì„œ ì €ëŠ” **1' or '1'='1**[^2]ë¥¼ ì…ë ¥í•˜ì˜€ê³ , ë¬¸ì œê°€ í•´ê²°ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë¬¸ì œì˜ ì •ë‹µì„ ì „ì†¡í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ì„ì˜ë¡œ** `ì°¸(true)`ê°’ì„ ë„£ì€ ê²°ê³¼ì…ë‹ˆë‹¤.

## ë§ˆì¹˜ë©°
ë¬¸ì œì˜ ì˜ë„ëŠ” SQL Injectionì— ê´€í•œ ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ê·¸ì¤‘ì—ì„œë„ ê°€ì¥ ìœ ëª…í•œ `'1 or '1'='1`ì„ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ë¬¸ì œë¼ê³  ìƒê°ë˜ì§€ë§Œ ë¬¸ì œê°€ ë¬´ì—‡ì„ ë¬»ê³ ìˆëŠ”ì§€ê°€ ê¶ê¸ˆí•œ ë¶€ë¶„ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ë³¸ ë¬¸ì œì— ì¡°ê¸ˆ ë” ë°°ìš¸ ì ì„ ì°¾ëŠ”ë‹¤ë©´ getë°©ì‹ê³¼ postë°©ì‹ì— ëŒ€í•˜ì—¬ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. 


[^1]: ë³¸ ë¬¸ì œì—ì„œëŠ” query error ì¶œë ¥ í˜¹ì€ ì´ì „ í˜ì´ì§€ë¡œ relocation ë¨.
[^2]: ê°€ì¥ ê¸°ë³¸ì ì¸ SQL Injection query. ì°¸ì„ ëœ»í•©ë‹ˆë‹¤.




<style>
.page__content h1,
.page__content h2
{
    padding-bottom: 0.5em;
    border-bottom: 1px solid #89ddff;
}
</style>

<style>
    p{
        margin-block-start: 0em;
        margin-block-end: 0em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
        margin-top:0px;
        margin-bottom: 0px;
    }

    .Mysql{   
    display: inline;
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 1px;
    padding-bottom: 2px;
    font-size: 0.6em;
    text-align: center;
    background-color: #097abb;
    color: #f8fafc;
    border-top-left-radius: 3px;
    border-bottom-left-radius: 3px;
    content: "MySQL"
}
    .Ver{
    display: inline;
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 1px;
    padding-bottom: 2px;
    font-size: 0.6em;
    text-align: center;
    background-color: #5c5c5c;
    color: #f8fafc;
    border-top-right-radius: 3px;
    border-bottom-right-radius: 3px;
}
</style>


<style>
.page h1:before {
    padding-right: 0.3em;
    color: #9ddcff;
    content: "/";
}

.page h2:before {
    padding-right: 0.3em;
    color: #9ddcff;
    content: "//";
}

.page h3:before {
    padding-right: 0.3em;
    color: #9ddcff;
    content: "///";
}

.page h4:before {
    padding-right: 0.3em;
    color: #9ddcff;
    content: "////";
}

p>code,
a>code,
li>code,
figcaption>code,
td>code {
    padding-left: 0.18rem;
    padding-right: 0.18rem;
    padding-top: 0.09rem;
    font-size: 0.8em;
    background: #fff;
    color: #5283f3;
    border: solid 1px #e1e4e5;
    border-radius: 0px;
    font-family: open sans,clear sans,helvetica neue,Helvetica,Arial,sans-serif;
    font-weight: bold;
}
</style>
